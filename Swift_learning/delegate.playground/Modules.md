# Modules

Modulesとは、複数のソースコードを含む配布可能なプログラムの単位で、他のプログラムへのインポートが可能
SwiftでのModulesは、プログラムの名前空間を区切る単位にもなっている

## 再利用可能かつ配布可能なプログラム

- 特定のプログラムからの独立性の高いプログラムは、他のプロジェクトでも再利用可能
- モジュールには、汎用的なプログラムをうまく再利用するための仕組みが備わっている
- 名前空間を定義することで、モジュール間の名前の衝突を解消したり、公開するインターフェースを握ることでモジュール外からの想定外の利用を防いだりできる
- 複数のプロジェクトで利用されることを想定したプログラムを書く場合は、モジュール化を前提にすると良い

## モジュールの再利用

- モジュールを作成するにはSwiftPMでビルドターゲットを定義する
- ビルドターゲットはパッケージのビルド単位で、パッケージ内に複数定義できる
- 一つのビルドターゲットにたいし、一つのモジュールが定義される

### ビルドターゲットの定義

ビルドターゲットを作成する前に、ビルドターゲットを含めるパッケージを作成する

``` shell
mkdir Example
cd Example
touch Package.swift
```

ビルドターゲットはPackage.swiftで定義する
ここではLibraryという名前で定義する

``` shell
// swift-tools-version: 5.1

import PackageDescription

let Packege(
    name: "Example",
    targets: [
        .target(name: Library)
    ]
)
```

- パッケージやビルドターゲットには、大文字始まりの名前をつけるのが一般的
- ビルドターゲットがエントリポイントのmain.swiftを含む場合は、ビルドターゲットの名前が実行ファイルの名前になるため、小文字始まりの名前をつけることもある
  
  定義したターゲット名と同名のディレクトリをSources以下に作成

``` shell
mkdir -p Sources/Library
```

- ビルドターゲットに含めるソースコードは、上記のディレクトリに配置する
- 配置されたソースコードはビルドターゲットに含まれ、モジュールとして、外部のプログラムから再利用が可能となる
- エントリポイントのmain.swiftが含まれる場合は外部のプログラムから利用できなくなるため注意が必要
  
  